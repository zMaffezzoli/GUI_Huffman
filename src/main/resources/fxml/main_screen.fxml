<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<ScrollPane fitToWidth="true" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.mycompany.huffman.controller.MainController"
            styleClass="root-scroll">
    <content>
        <VBox styleClass="main-container">

            <Label text="Huffman Compressor Pro" styleClass="app-title"/>

            <TabPane fx:id="inputTabPane" tabClosingPolicy="UNAVAILABLE" styleClass="input-tab-pane">
                <Tab fx:id="tabText" text="Digitar Texto">
                    <VBox styleClass="tab-content">
                        <TextArea fx:id="inputArea" promptText="Digite o texto aqui..." wrapText="true" styleClass="input-text-area"/>
                        <HBox styleClass="button-bar">
                            <Button text="Colocar Exemplo" onAction="#handlePasteExample" styleClass="btn-secondary"/>
                            <Button text="Limpar Texto" onAction="#handleClearText" styleClass="btn-danger"/>
                        </HBox>
                    </VBox>
                </Tab>
                <Tab fx:id="tabFile" text="Carregar Arquivo">
                    <HBox styleClass="tab-content-file">
                        <Button text="Selecionar Arquivo .txt" onAction="#handleSelectFile" styleClass="btn-secondary"/>
                        <Label fx:id="fileLabel" text="Nenhum arquivo selecionado" styleClass="label-placeholder"/>
                    </HBox>
                </Tab>
            </TabPane>

            <HBox styleClass="action-container">
                <Button text="COMPRIMIR E GERAR ÁRVORE" onAction="#handleProcess" styleClass="btn-primary"/>
            </HBox>

            <HBox styleClass="data-container">
                <VBox styleClass="column-container" HBox.hgrow="ALWAYS">
                    <Label text="Frequências" styleClass="section-subtitle"/>
                    <TableView fx:id="freqTable" styleClass="modern-table" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="colSymbolFreq" text="Símbolo"/>
                            <TableColumn fx:id="colFreq" text="Qtd"/>
                        </columns>
                        <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/></columnResizePolicy>
                    </TableView>
                </VBox>

                <VBox styleClass="column-container" HBox.hgrow="ALWAYS">
                    <Label text="Códigos Gerados" styleClass="section-subtitle"/>
                    <TableView fx:id="codeTable" styleClass="modern-table" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="colSymbolCode" text="Símbolo"/>
                            <TableColumn fx:id="colCode" text="Binário"/>
                        </columns>
                        <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/></columnResizePolicy>
                    </TableView>
                </VBox>

                <VBox styleClass="column-container" HBox.hgrow="ALWAYS">
                    <Label text="Resultado Final" styleClass="section-subtitle"/>
                    <TextArea fx:id="binaryOutput" editable="false" wrapText="true" styleClass="output-area" VBox.vgrow="ALWAYS"/>
                </VBox>
            </HBox>

            <VBox styleClass="tree-container">
                <HBox alignment="CENTER_LEFT" spacing="10">
                    <Label text="Visualização da Árvore" styleClass="section-title"/>
                    <Label text="(Arraste para mover, Ctrl + Scroll para zoom)" style="-fx-font-size: 11px; -fx-text-fill: #95a5a6;"/>
                </HBox>

                <StackPane fx:id="treeViewport" styleClass="tree-viewport">
                    <Pane fx:id="treePane" styleClass="tree-canvas"/>
                </StackPane>
            </VBox>

        </VBox>
    </content>
</ScrollPane>